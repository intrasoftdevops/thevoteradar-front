<div class="min-h-screen" [style.background]="'linear-gradient(to bottom right, rgba(var(--color-primary-rgb), 0.05), white, rgba(var(--color-primary-rgb), 0.05))'">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Loader -->
    <div *ngIf="loading" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white rounded-lg p-8 flex flex-col items-center gap-4 shadow-2xl">
        <div class="animate-spin rounded-full h-16 w-16 border-b-4" [style.border-color]="'var(--color-primary)'"></div>
        <p class="text-gray-700 font-semibold text-lg">Creando testigo...</p>
      </div>
    </div>
    <form [formGroup]="createForm" (ngSubmit)="onSubmit()" [class.opacity-50]="loading" [class.pointer-events-none]="loading">
      <!-- Header -->
      <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden mb-6">
        <div class="p-6 sm:p-8" [style.background]="'linear-gradient(to right, var(--color-primary), var(--color-accent))'">
          <h2 class="text-2xl sm:text-3xl font-bold text-white mb-0">Añadir testigo</h2>
        </div>
      </div>

      <!-- Form Content -->
      <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden mb-6">
        <div class="p-6 sm:p-8">
          <!-- Datos personales -->
          <div class="mb-8">
            <div class="flex items-center gap-3 mb-6">
              <div class="p-2 rounded-lg" [style.background]="'linear-gradient(to right, var(--color-primary), var(--color-accent))'">
                <i class="fas fa-user text-white text-lg"></i>
              </div>
              <h3 class="text-xl font-bold text-gray-900">Datos personales</h3>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                  Nombres <span class="text-red-500">*</span>
                </label>
                <input
                  type="text"
                  class="w-full px-4 py-3 text-sm sm:text-base border border-gray-300 rounded-xl bg-white/50 backdrop-blur-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:border-transparent"
                  [style.--tw-ring-color]="'var(--color-primary)'"
                  formControlName="nombres"
                  (keypress)="keypressValidator.keyPressLetters($event)"
                  placeholder="Ingrese nombres"
                  (focus)="onInputFocus($event)"
                  (blur)="onInputBlur($event)"
                />
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                  Apellidos <span class="text-red-500">*</span>
                </label>
                <input
                  type="text"
                  class="w-full px-4 py-3 text-sm sm:text-base border border-gray-300 rounded-xl bg-white/50 backdrop-blur-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:border-transparent"
                  [style.--tw-ring-color]="'var(--color-primary)'"
                  formControlName="apellidos"
                  (keypress)="keypressValidator.keyPressLetters($event)"
                  placeholder="Ingrese apellidos"
                  (focus)="onInputFocus($event)"
                  (blur)="onInputBlur($event)"
                />
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                  Género <span class="text-red-500">*</span>
                </label>
                <ng-select
                  [searchable]="false"
                  class="custom-select rounded"
                  formControlName="genero_id"
                  placeholder="Seleccione género"
                  [clearAllText]="'Borrar todo'"
                >
                  <ng-option [value]="1">Masculino</ng-option>
                  <ng-option [value]="2">Femenino</ng-option>
                  <ng-option [value]="3">Otro</ng-option>
                </ng-select>
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                  Tipo de documento <span class="text-red-500">*</span>
                </label>
                <ng-select
                  [searchable]="false"
                  class="custom-select rounded"
                  formControlName="tipo_documento_id"
                  placeholder="Seleccione tipo de documento"
                  [clearAllText]="'Borrar todo'"
                >
                  <ng-option [value]="1">Cédula de ciudadanía</ng-option>
                </ng-select>
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                  Número de documento <span class="text-red-500">*</span>
                </label>
                <input
                  type="number"
                  class="w-full px-4 py-3 text-sm sm:text-base border border-gray-300 rounded-xl bg-white/50 backdrop-blur-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:border-transparent"
                  [style.--tw-ring-color]="'var(--color-primary)'"
                  placeholder="Ingrese número de documento"
                  formControlName="numero_documento"
                  (keypress)="keypressValidator.keyPressNumbers($event)"
                  (focus)="onInputFocus($event)"
                  (blur)="onInputBlur($event)"
                />
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                  Teléfono <span class="text-red-500">*</span>
                </label>
                <input
                  type="number"
                  class="w-full px-4 py-3 text-sm sm:text-base border border-gray-300 rounded-xl bg-white/50 backdrop-blur-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:border-transparent"
                  [style.--tw-ring-color]="'var(--color-primary)'"
                  formControlName="telefono"
                  (keypress)="keypressValidator.keyPressNumbers($event)"
                  placeholder="Ingrese número de teléfono"
                  (focus)="onInputFocus($event)"
                  (blur)="onInputBlur($event)"
                />
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                  Correo electrónico <span class="text-red-500">*</span>
                </label>
                <input
                  type="email"
                  class="w-full px-4 py-3 text-sm sm:text-base border border-gray-300 rounded-xl bg-white/50 backdrop-blur-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:border-transparent"
                  [style.--tw-ring-color]="'var(--color-primary)'"
                  formControlName="email"
                  placeholder="Ingrese correo electrónico"
                  (focus)="onInputFocus($event)"
                  (blur)="onInputBlur($event)"
                />
                <small
                  class="text-red-500 text-sm mt-1 block"
                  *ngIf="createFormControl['email'].errors?.['email'] || createFormControl['email'].errors?.['invalidEmail']"
                >
                  Ingrese una dirección de correo electrónico válida.
                </small>
              </div>
            </div>
          </div>

          <!-- Separador -->
          <div class="my-8 border-t-2" [style.border-color]="'var(--color-primary)'"></div>

          <!-- Lugar de trabajo -->
          <div>
            <div class="flex items-center gap-3 mb-6">
              <div class="p-2 rounded-lg" [style.background]="'linear-gradient(to right, var(--color-primary), var(--color-accent))'">
                <i class="fas fa-map-marker-alt text-white text-lg"></i>
              </div>
              <h3 class="text-xl font-bold text-gray-900">Lugar de trabajo</h3>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                  Departamento de votación <span class="text-red-500">*</span>
                </label>
                <ng-select
                  [items]="dataDepartments"
                  [searchable]="false"
                  class="custom-select rounded"
                  placeholder="Seleccione departamento"
                  bindLabel="nombre_departamento_votacion"
                  bindValue="codigo_unico"
                  (change)="getSelectedDepartment($event)"
                  información="No hay información disponible"
                  [clearAllText]="'Borrar todo'"
                >
                </ng-select>
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                  Municipio de votación <span class="text-red-500">*</span>
                </label>
                <ng-select
                  [items]="dataMunicipals"
                  class="custom-select rounded"
                  bindLabel="nombre"
                  bindValue="codigo_unico"
                  (change)="getSelectedMunicipal($event)"
                  [clearAllText]="'Borrar todo'"
                  placeholder="Seleccione municipio"
                  información="No hay información disponible"
                  [(ngModel)]="selectedMunicipal"
                  [ngModelOptions]="{ standalone: true }"
                >
                </ng-select>
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                  Zona de votación <span class="text-red-500">*</span>
                </label>
                <ng-select
                  [items]="dataZones"
                  class="custom-select rounded"
                  bindLabel="nombre"
                  bindValue="codigo_unico"
                  (change)="getSelectedZone($event)"
                  placeholder="Seleccione zona"
                  información="No hay información disponible"
                  [(ngModel)]="selectedZone"
                  [ngModelOptions]="{ standalone: true }"
                  [clearAllText]="'Borrar todo'"
                >
                </ng-select>
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                  Puesto de votación <span class="text-red-500">*</span>
                </label>
                <ng-select
                  [items]="dataStations"
                  [searchable]="false"
                  class="custom-select rounded"
                  formControlName="puesto"
                  bindLabel="nombre"
                  bindValue="codigo_unico"
                  placeholder="Seleccione puesto"
                  (change)="getSelectedStation($event)"
                  información="No hay información disponible"
                  [clearAllText]="'Borrar todo'"
                >
                </ng-select>
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                  Mesas de votación
                </label>
                <ng-select
                  [items]="dataTables"
                  class="custom-multiple-select rounded"
                  formControlName="mesas"
                  bindLabel="numero_mesa"
                  bindValue="codigo_unico"
                  [multiple]="true"
                  [clearAllText]="'Borrar todo'"
                  placeholder="Seleccione mesa(s)"
                  información="No hay información disponible"
                >
                </ng-select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="flex justify-end pt-4">
        <button 
          type="submit" 
          class="px-6 sm:px-8 py-3 sm:py-4 text-base sm:text-lg font-semibold rounded-xl text-white transition-all duration-200 hover:shadow-lg"
          [style.background]="'linear-gradient(to right, var(--color-primary), var(--color-accent))'"
          (mouseenter)="onButtonHoverEnter($event)"
          (mouseleave)="onButtonHoverLeave($event)"
        >
          CREAR
        </button>
      </div>
    </form>
  </div>
</div>
