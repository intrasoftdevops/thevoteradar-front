<nav class="sidebar-menu" [class.collapsed]="collapsed">
  <!-- Logo/Branding -->
  <div class="sidebar-header">
    <div 
      class="brand" 
      *ngIf="currentTheme"
      (click)="goToHome()"
      [title]="'Ir al inicio'"
      style="cursor: pointer;">
      <img 
        [src]="currentTheme.branding.logo" 
        [alt]="currentTheme.branding.title"
        class="brand-logo">
      <span class="brand-name" *ngIf="!collapsed">
        {{ currentTheme.branding.title }}
      </span>
    </div>
  </div>

  <!-- Menu Items -->
  <div class="sidebar-content">
    <ul class="menu-list">
      <li 
        *ngFor="let item of menuItems" 
        class="menu-item"
        [class.expanded]="isExpanded(item.id)"
        [class.has-active]="hasActiveChild(item.id)"
        [class.coming-soon]="item.comingSoon">
        
        <!-- Menu Header (clickeable) -->
        <div 
          class="menu-header"
          (click)="item.children ? toggleMenu(item.id, $event) : navigateTo(item.route!, item.id)"
          [class.active]="hasActiveChild(item.id)">
          
          <div class="menu-icon-wrapper">
            <i [class]="item.icon"></i>
          </div>
          
          <span class="menu-label" *ngIf="!collapsed">
            {{ item.label }}
          </span>
          
          <span class="coming-soon-badge" *ngIf="item.comingSoon && !collapsed">
            Pr贸ximamente
          </span>
          
          <i 
            *ngIf="item.children && !collapsed" 
            class="fas fa-chevron-down menu-arrow"
            [class.rotated]="isExpanded(item.id)">
          </i>
        </div>

        <!-- Submenu -->
        <ul 
          class="submenu" 
          *ngIf="item.children && isExpanded(item.id) && !collapsed">
          
          <li 
            *ngFor="let child of item.children" 
            class="submenu-item"
            [class.active]="isActive(child.id)"
            [class.has-children]="child.children"
            [class.expanded]="child.children && isSubmenuExpanded(child.id)"
            [class.disabled]="item.comingSoon || child.comingSoon">
            
            <!-- Submenu item header -->
            <div 
              class="submenu-header"
              (click)="child.children ? toggleSubmenu(child.id, $event) : (!item.comingSoon && !child.comingSoon && child.route && navigateTo(child.route, child.id))">
              <i [class]="child.icon || 'fas fa-circle'" class="submenu-icon"></i>
              <span class="submenu-label">{{ child.label }}</span>
              <i 
                *ngIf="child.children" 
                class="fas fa-chevron-right submenu-arrow"
                [class.rotated]="isSubmenuExpanded(child.id)">
              </i>
              <span class="coming-soon-badge" *ngIf="child.comingSoon">
                Pr贸ximamente
              </span>
            </div>
            
            <!-- Nested submenu -->
            <ul 
              class="nested-submenu" 
              *ngIf="child.children && isSubmenuExpanded(child.id)">
              <li 
                *ngFor="let nestedChild of child.children" 
                class="nested-submenu-item"
                [class.active]="isActive(nestedChild.id)"
                [class.disabled]="nestedChild.comingSoon"
                (click)="!nestedChild.comingSoon && nestedChild.route && navigateTo(nestedChild.route, nestedChild.id)">
                <i [class]="nestedChild.icon || 'fas fa-circle'" class="nested-submenu-icon"></i>
                <span class="nested-submenu-label">{{ nestedChild.label }}</span>
                <span class="coming-soon-badge" *ngIf="nestedChild.comingSoon">
                  Pr贸ximamente
                </span>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- Footer del Sidebar -->
  <div class="sidebar-footer" *ngIf="!collapsed">
    <div class="user-info">
      <div class="user-avatar">
        <i class="fas fa-user-circle"></i>
      </div>
      <div class="user-details">
        <span class="user-role">
          {{ getRoleDisplayName() }}
        </span>
      </div>
    </div>
    <button class="btn-logout" (click)="logout()" title="Cerrar sesi贸n">
      <i class="fas fa-sign-out-alt"></i>
    </button>
  </div>
</nav>

